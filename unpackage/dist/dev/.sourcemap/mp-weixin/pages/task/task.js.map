{"version":3,"sources":["uni-app:///main.js","webpack:///D:/BaiduSyncdisk/毕设/Desktop/vts-wechat/pages/task/task.vue?f2fe","webpack:///D:/BaiduSyncdisk/毕设/Desktop/vts-wechat/pages/task/task.vue?548c","webpack:///D:/BaiduSyncdisk/毕设/Desktop/vts-wechat/pages/task/task.vue?7c18","webpack:///D:/BaiduSyncdisk/毕设/Desktop/vts-wechat/pages/task/task.vue?3eba","uni-app:///pages/task/task.vue","webpack:///D:/BaiduSyncdisk/毕设/Desktop/vts-wechat/pages/task/task.vue?77eb","webpack:///D:/BaiduSyncdisk/毕设/Desktop/vts-wechat/pages/task/task.vue?0ff1"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","data","allShow","loadMore","loadAll","isloading","subsectionlist","select","taskList","mytaskList","currentPage","pageSize","total","show","modalInfo","content","modalInfo2","tempTask","onPullDownRefresh","console","that","setTimeout","uni","onLoad","onReachBottom","title","methods","change","sectionChange","initMyTaskList","driverId","initTaskList","page","limit","temptaskList","openDetail","url","selectTask","finishTask","confirmSelect","taskId","taskStatus","icon","message","confirmFinish","finishTime"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;AACc;;;AAGjE;AACwM;AACxM,gBAAgB,4MAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,mTAEN;AACP,KAAK;AACL;AACA,aAAa,4WAEN;AACP,KAAK;AACL;AACA,aAAa,uPAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,aAAa,qUAEN;AACP,KAAK;AACL;AACA,aAAa,2RAEN;AACP,KAAK;AACL;AACA,aAAa,2RAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC5HA;AAAA;AAAA;AAAA;AAA0xB,CAAgB,ywBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCwH9yB;EACAC;EACAC;IACA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACA;MACAC;MACAC;MACAC;MAAA;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;QAAA;QACAC;QAAA;QACAF;MACA;;MACAG;QAAA;QACAD;QAAA;QACAF;MACA;;MACAI;IACA;EACA;EACA;AACA;AACA;EACA;EACAC;IACA;IACAC;IACA;MACAC;MACAA;MACAA;MACAA;MACA;MACAA;MACAA;MACA;MACAD;IACA;MAAA;MACAC;IACA;IAEAC;MACA;MACAC;MACAF;IACA;EACA;EACA;AACA;AACA;EACAG;IACA;IACA;EACA;EACA;AACA;AACA;EACAC;IACA;IACA;IACA;MACA;IACA;MACA;MACA;QACAJ;QACAA;QACAE;UACAG;QACA;MACA;QACA;;QAEA;QACAL;QACAE;UACAG;QACA;QACA;QACAL;QAEA;UACAA;UACAA;UACA;UACAC;YACA;YACAD;YACAE;YACAF;YACAA;UACA;QACA;QACAD;MACA;IAEA;EAEA;EACAO;IACA;IACAC;MACA;IACA;IACAC;MACA;MACAT;IACA;IACA;IACAU;MACA;MACA;MACA;QACAC;MACA;MACA;MACAV;QACAA;QACAD;MACA;IACA;IACAY;MACAZ;MACA;MACA;MACA;MACA;QACAa;QACAC;MACA;MACAd;MACAC;QACAA;QACA;QACA;QACAc;UACAd;QACA;QACA;QACAD;QACAA;QACAC;MACA;MACAA;IACA;IACA;IACAe;MACAhB;MACA;MACA;MACA;MACA;MACA;MACAG;QACAc;MACA;IAEA;IACAC;MACA;MACA;MACAlB;IACA;IACAmB;MACA;MACA;MACAnB;IACA;IACAoB;MACApB;MACA;MACA;QACAqB;QACAV;QACAW;MACA;MACArB;QACAD;QACA;UAAA;UACAG;YACAG;YACAiB;UACA;QACA;UACA;UACApB;YACAqB;UACA;UACAvB;;UAEAC;YACA;YACAD;cACA;gBACAD;gBACAC;cACA;YAEA;YACA;YACAA;YACAE;UACA;QACA;MAEA;MACAH;IACA;IACAyB;MACA;MACA;QACAJ;QACAC;QACAI;MACA;MACAzB;QACAD;QACA;UACAG;YACAG;YACAiB;UACA;QACA,OACA;UACA;UACApB;YACAqB;UACA;UACAvB;;UAEAC;YACA;YACAD;cACA;gBACAD;gBACAC;cACA;YAEA;YACAE;UACA;QACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACtXA;AAAA;AAAA;AAAA;AAAy9C,CAAgB,o3CAAG,EAAC,C;;;;;;;;;;;ACA7+C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/task/task.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/task/task.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./task.vue?vue&type=template&id=96a65fb4&\"\nvar renderjs\nimport script from \"./task.vue?vue&type=script&lang=js&\"\nexport * from \"./task.vue?vue&type=script&lang=js&\"\nimport style0 from \"./task.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/task/task.vue\"\nexport default component.exports","export * from \"-!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./task.vue?vue&type=template&id=96a65fb4&\"","var components\ntry {\n  components = {\n    uOverlay: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-overlay/u-overlay\" */ \"@/uni_modules/uview-ui/components/u-overlay/u-overlay.vue\"\n      )\n    },\n    uniSegmentedControl: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-segmented-control/components/uni-segmented-control/uni-segmented-control\" */ \"@/uni_modules/uni-segmented-control/components/uni-segmented-control/uni-segmented-control.vue\"\n      )\n    },\n    uniCard: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-card/components/uni-card/uni-card\" */ \"@/uni_modules/uni-card/components/uni-card/uni-card.vue\"\n      )\n    },\n    uSteps: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-steps/u-steps\" */ \"@/uni_modules/uview-ui/components/u-steps/u-steps.vue\"\n      )\n    },\n    uStepsItem: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-steps-item/u-steps-item\" */ \"@/uni_modules/uview-ui/components/u-steps-item/u-steps-item.vue\"\n      )\n    },\n    uRow: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-row/u-row\" */ \"@/uni_modules/uview-ui/components/u-row/u-row.vue\"\n      )\n    },\n    uCol: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-col/u-col\" */ \"@/uni_modules/uview-ui/components/u-col/u-col.vue\"\n      )\n    },\n    uEmpty: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-empty/u-empty\" */ \"@/uni_modules/uview-ui/components/u-empty/u-empty.vue\"\n      )\n    },\n    uModal: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-modal/u-modal\" */ \"@/uni_modules/uview-ui/components/u-modal/u-modal.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.select === 0 ? _vm.taskList.length : null\n  var l0 =\n    _vm.select === 0 && g0\n      ? _vm.__map(_vm.taskList, function (item, index) {\n          var $orig = _vm.__get_orig(item)\n          var g1 = item.taskContent.length\n          var g2 = g1 > 18 ? item.taskContent.substring(0, 18) : null\n          var g3 = item.taskContent.length\n          return {\n            $orig: $orig,\n            g1: g1,\n            g2: g2,\n            g3: g3,\n          }\n        })\n      : null\n  var g4 = _vm.select === 1 ? _vm.mytaskList.length : null\n  var l1 =\n    _vm.select === 1 && g4\n      ? _vm.__map(_vm.mytaskList, function (item, index) {\n          var $orig = _vm.__get_orig(item)\n          var g5 = item.taskContent.length\n          var g6 = g5 > 18 ? item.taskContent.substring(0, 18) : null\n          var g7 = item.taskContent.length\n          return {\n            $orig: $orig,\n            g5: g5,\n            g6: g6,\n            g7: g7,\n          }\n        })\n      : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.modalInfo.show = false\n    }\n    _vm.e1 = function ($event) {\n      _vm.modalInfo2.show = false\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        l0: l0,\n        g4: g4,\n        l1: l1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./task.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./task.vue?vue&type=script&lang=js&\"","<template>\r\n\t<!-- 禁止页面穿透 -->\r\n\t<page-meta :page-style=\"'overflow:'+(show?'hidden':'visible')\"></page-meta>\n\t<view class=\"container\">\r\n\t\t<u-overlay :show=\"allShow\" :duration=\"100\" :z-index =\"999\" :opacity=\"0.3\"></u-overlay>\r\n\t\t<view>\r\n\t\t\t<uni-segmented-control :current=\"select\" :values=\"subsectionlist\" style-type=\"text\" active-color=\"#2a781d\"\r\n\t\t\t\t@clickItem=\"sectionChange\" style=\"border-radius: 50upx;\" />\r\n\t\t</view>\r\n\t\t<!-- // 全部任务界面 -->\r\n\t\t<view v-if=\"select === 0\">\r\n\t\t\t<!-- 全部任务界面 -->\r\n\t\t\t<template v-if=\"taskList.length\">\r\n\t\t\t\t\t<!-- 全部任务界面 -->\r\n\t\t\t\t\t<view v-for=\"(item,index) in taskList\" :key=\"index\">\r\n\t\t\t\t\t\t<!-- <view v-if=\"item.task\"></view> -->\r\n\t\t\t\t\t\t<uni-card class=\"task\" :title=\"'任务'+item.taskId\" :sub-title=\"item.taskType\" :extra=\"item.startTime+' --> '+item.endTime\" \r\n\t\t\t\t\t\t\t\t:thumbnail=\"'/static/image/task'+item.taskStatus+'.png'\" >\r\n\t\t\t\t\t\t\t\t<view v-if=\"item.taskStatus!=0\">\r\n\t\t\t\t\t\t\t\t\t<u-steps :current=\"item.taskStatus-1\">\r\n\t\t\t\t\t\t\t\t\t\t<u-steps-item title=\"待接收\" ></u-steps-item>\r\n\t\t\t\t\t\t\t\t\t\t<u-steps-item title=\"进行中\"  ></u-steps-item>\r\n\t\t\t\t\t\t\t\t\t\t<u-steps-item title=\"完成\"></u-steps-item>\r\n\t\t\t\t\t\t\t\t\t</u-steps>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view v-if=\"item.taskStatus==0\">\r\n\t\t\t\t\t\t\t\t\t<!-- <text style=\"font-style: ;\">已禁用</text> -->\r\n\t\t\t\t\t\t\t\t\t<text style=\"font-size: 35upx; font-weight:400;  \r\n\t\t\t\t\t\t\t\t\ttext-align:center; background-color: #ffffff;color: #ff0000;\" >\r\n\t\t\t\t\t\t\t\t\t已禁用\r\n\t\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<text class=\"taskContent\" v-if=\"item.taskContent.length>18\">内容：\t{{item.taskContent.substring(0, 18)}}......</text>\r\n\t\t\t\t\t\t\t<text class=\"taskContent\" v-if=\"item.taskContent.length<=18\">内容：\t{{item.taskContent}}</text>\r\n\t\t\t\t\t\t\t<!-- 操作按钮 -->\r\n\t\t\t\t\t\t\t<view class=\"bottom-buttons\">\r\n\t\t\t\t\t\t\t    <view class=\"button-tag\" @click=\"openDetail(item)\">查看详情</view>\r\n\t\t\t\t\t\t\t    <!-- <view class=\"button-tag\">取消</view> -->\r\n\t\t\t\t\t\t\t    <view v-if=\"item.taskStatus==1\" class=\"button-tag\" style=\"background-color: #0abafa; color: white;\"\r\n\t\t\t\t\t\t\t\t @click=\"selectTask(item)\">\r\n\t\t\t\t\t\t\t\t\t接受\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</uni-card>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<u-row customStyle=\"margin-bottom: 10px\">\r\n\t\t\t\t\t\t<u-col span=\"4\" offset=\"4\">\r\n\t\t\t\t\t\t\t<view class=\"loading\" style=\"margin-left: 20upx;\" :hidden=\"!loadMore\">正在载入更多...</view>\r\n\t\t\t\t\t\t</u-col>\r\n\t\t\t\t\t</u-row>\r\n\t\t\t\t\t<u-row customStyle=\"margin-bottom: 10px\">\r\n\t\t\t\t\t\t<u-col span=\"4\" offset=\"4\">\r\n\t\t\t\t\t\t\t <view class=\"loading\" style=\"align-items: center;\" :hidden=\"!loadAll\">已加载全部</view>\r\n\t\t\t\t\t\t</u-col>\r\n\t\t\t\t\t</u-row>\r\n\t\t\t</template>\r\n\t\t\t<!-- 无数据提示 -->\r\n\t\t\t<template v-else>\r\n\t\t\t\t<u-empty\r\n\t\t\t\t\t\ttext='正在加载'\r\n\t\t\t\t\t\tmode=\"order\"\r\n\t\t\t\t\t\ticon=\"http://cdn.uviewui.com/uview/empty/order.png\"\r\n\t\t\t\t>\r\n\t\t\t\t</u-empty>\r\n\t\t\t</template>\r\n\t\t</view>\r\n\t\t<!-- 我的任务 -->\r\n\t\t<view v-if=\"select === 1\">\r\n\t\t\t<!-- 我的任务界面 -->\r\n\t\t\t<template v-if=\"mytaskList.length\">\r\n\t\t\t\t\t<!-- 我的任务界面 -->\r\n\t\t\t\t\t<view v-for=\"(item,index) in mytaskList\" :key=\"index\">\r\n\t\t\t\t\t\t<uni-card class=\"task\" :title=\"'任务'+item.taskId\" :sub-title=\"item.taskType\" :extra=\"item.startTime+' --> '+item.endTime\" \r\n\t\t\t\t\t\t\t\t:thumbnail=\"'/static/image/task'+item.taskStatus+'.png'\" >\r\n\t\t\t\t\t\t\t\t<view v-if=\"item.taskStatus!=0\">\r\n\t\t\t\t\t\t\t\t\t<u-steps :current=\"item.taskStatus-1\">\r\n\t\t\t\t\t\t\t\t\t\t<u-steps-item title=\"待接收\" ></u-steps-item>\r\n\t\t\t\t\t\t\t\t\t\t<u-steps-item title=\"进行中\"  ></u-steps-item>\r\n\t\t\t\t\t\t\t\t\t\t<u-steps-item title=\"完成\"></u-steps-item>\r\n\t\t\t\t\t\t\t\t\t</u-steps>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view v-if=\"item.taskStatus==0\">\r\n\t\t\t\t\t\t\t\t\t<!-- <text style=\"font-style: ;\">已禁用</text> -->\r\n\t\t\t\t\t\t\t\t\t<text style=\"font-size: 35upx; font-weight:400;  \r\n\t\t\t\t\t\t\t\t\ttext-align:center; background-color: #ffffff;color: #ff0000;\" >\r\n\t\t\t\t\t\t\t\t\t已禁用\r\n\t\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<text class=\"taskContent\" v-if=\"item.taskContent.length>18\">内容：\t{{item.taskContent.substring(0, 18)}}......</text>\r\n\t\t\t\t\t\t\t<text class=\"taskContent\" v-if=\"item.taskContent.length<=18\">内容：\t{{item.taskContent}}</text>\r\n\t\t\t\t\t\t\t<!-- 操作按钮 -->\r\n\t\t\t\t\t\t\t<view class=\"bottom-buttons\">\r\n\t\t\t\t\t\t\t\t<!-- <view class=\"button-tag\">删除</view> -->\r\n\t\t\t\t\t\t\t\t<view class=\"button-tag\" @click=\"openDetail(item)\">查看详情</view>\r\n\t\t\t\t\t\t\t\t<view v-if=\"item.taskStatus==2\" class=\"button-tag\" style=\"background-color: #0abafa;\r\n\t\t\t\t\t\t\t\t color: white;\" @click=\"finishTask(item)\">\r\n\t\t\t\t\t\t\t\t  完成\r\n\t\t\t\t\t\t\t\t </view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</uni-card>\r\n\t\t\t\t\t</view>\n\t\t\t</template>\n\t\t\t<!-- 无数据提示 -->\n\t\t\t<template v-else>\r\n\t\t\t\t<u-empty\r\n\t\t\t\t\t\ttext='暂无任务'\n\t\t\t\t\t\tmode=\"order\"\n\t\t\t\t\t\ticon=\"http://cdn.uviewui.com/uview/empty/order.png\"\n\t\t\t\t>\n\t\t\t\t</u-empty>\n\t\t\t</template>\r\n\t\t</view>\r\n\t\t<!-- 接受任务弹窗 -->\r\n\t\t<u-modal :show=\"modalInfo.show\" :content=\"modalInfo.content\" @confirm=\"confirmSelect(item)\" :showCancelButton=\"true\"\r\n\t\t\t@cancel=\"modalInfo.show=false\"></u-modal>\r\n\t\t<u-modal :show=\"modalInfo2.show\" :content=\"modalInfo2.content\" @confirm=\"confirmFinish\" :showCancelButton=\"true\"\r\n\t\t\t@cancel=\"modalInfo2.show=false\"></u-modal>\n\t</view>\n</template>\n<script>\n\texport default {\n\t\tcomponents: {},\n\t\tdata() {\n\t\t\treturn {\r\n\t\t\t\tallShow:false, //全局屏蔽遮罩\r\n\t\t\t\tloadMore: false, //\"上拉加载\"的变量，默认false，隐藏  \r\n\t\t\t\tloadAll: false ,//“没有数据”的变量，默认false，隐藏  \r\n\t\t\t\t// 是否正在请求数据(节流)\r\n\t\t\t\tisloading: false,\r\n\t\t\t\tsubsectionlist: ['全部任务', '我的任务'],\r\n\t\t\t\tselect: 0,    // 0:全部任务 1：我的任务\r\n\t\t\t\t// 新增\r\n\t\t\t\ttaskList:[],\r\n\t\t\t\tmytaskList:[],\r\n\t\t\t\tcurrentPage:1,\r\n\t\t\t\tpageSize:5,\r\n\t\t\t\ttotal:0,\r\n\t\t\t\tshow:false ,//禁止页面滑动穿透,\r\n\t\t\t\tmodalInfo: { // 定义一个modalInfo对象\r\n\t\t\t\t\tcontent: '确定要接受该任务吗？', // 内容\r\n\t\t\t\t\tshow: false // 是否展示\r\n\t\t\t\t},\r\n\t\t\t\tmodalInfo2: { // 定义一个modalInfo对象\r\n\t\t\t\t\tcontent: '确定完成该任务吗？', // 内容\r\n\t\t\t\t\tshow: false // 是否展示\r\n\t\t\t\t},\r\n\t\t\t\ttempTask:null,  //临时task数据\n\t\t\t};\n\t\t},\r\n\t\t/**\r\n\t\t * 页面下拉刷新事件的处理函数\r\n\t\t */\r\n\t\t// 监听到下拉刷新\r\n\t\tonPullDownRefresh() {\r\n\t\t\tlet that =this\r\n\t\t\tconsole.log(\"监听到下拉刷新\");\r\n\t\t\tif(that.select==0){\r\n\t\t\t\tthat.currentPage =1 //重新开始\r\n\t\t\t\tthat.loadAll =false\r\n\t\t\t\tthat.loadMore =false\r\n\t\t\t\tthat.total = 0\r\n\t\t\t\t// that.taskList = []\r\n\t\t\t\tthat.taskList.splice(0,that.taskList.length)  \r\n\t\t\t\tthat.initTaskList()\r\n\t\t\t\t//全部任务刷新\r\n\t\t\t\tconsole.log(\"全部任务页面刷新\")\r\n\t\t\t}else if(that.select==1){   // 我的任务刷新\r\n\t\t\t\tthat.initMyTaskList()\r\n\t\t\t}\r\n\t\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\t// 模拟2秒后停止下拉刷新显示样式\r\n\t\t\t\tuni.stopPullDownRefresh()\r\n\t\t\t\tthat.isloading = false  \r\n\t\t\t}, 2000)\r\n\t\t}, \r\n\t\t/**\r\n\t\t * 页面加载事件的处理函数\r\n\t\t */\r\n\t   onLoad(){\r\n\t\t this.initTaskList()  \r\n\t\t this.initMyTaskList()\r\n\t   },\r\n\t   /**\r\n\t    * 页面上拉触底事件的处理函数\r\n\t    */\r\n\t   onReachBottom() {\r\n\t\t\tlet that = this;\r\n\t\t   // 判断是否正在请求其它数据，如果是，则不发起额外的请求\r\n\t\t   if (that.isloading) {\r\n\t\t\t   return\r\n\t\t   }else{\r\n\t\t\t   // 判断数据是否加载完\r\n\t\t\t  if (that.taskList.length >= that.total) {\r\n\t\t\t   that.loadMore =false\r\n\t\t\t   that.loadAll = true\r\n\t\t\t\t uni.showToast({\r\n\t\t\t\t\ttitle: '数据加载完毕'\r\n\t\t\t\t });\r\n\t\t\t  }else{\r\n\t\t\t\t  // 数据未加载完\r\n\t\t\t\t\r\n\t\t\t\t  \t// 显示加载图标  \r\n\t\t\t\t  \tthat.allShow = true\r\n\t\t\t\t     uni.showLoading({\r\n\t\t\t\t  \t title: '加载数据中...',\r\n\t\t\t\t     })\r\n\t\t\t\t     // 查询下一页\r\n\t\t\t\t     that.currentPage++\r\n\t\t\t\t     \r\n\t\t\t\t  if (!that.loadMore) {\r\n\t\t\t\t  \tthat.loadMore =true//加载中  \r\n\t\t\t\t  \tthat.loadAll = false//是否加载完所有数据\r\n\t\t\t\t  \t //加载更多，这里做下延时加载\r\n\t\t\t\t  \t setTimeout(() => {\r\n\t\t\t\t  \t\t //\r\n\t\t\t\t  \t   that.initTaskList()\r\n\t\t\t\t  \t\tuni.hideLoading()\r\n\t\t\t\t\t\tthat.loadMore =false // 加载完毕\r\n\t\t\t\t  \t\tthat.allShow = false\r\n\t\t\t\t  \t }, 2000)\r\n\t\t\t\t\t}\r\n\t\t\t\t   console.log(\"触发上拉\");\r\n\t\t\t  }\r\n\t\t\t   \r\n\t\t   }\r\n\t\t   \r\n\t   },\n\t\tmethods: {\r\n\t\t\t// 禁止页面滑动穿透\r\n\t\t\tchange(e) {\r\n\t\t\t\tthis.show = e.show\r\n\t\t\t},\r\n\t\t\tsectionChange(index) {\r\n\t\t\t\tthis.select = index.currentIndex;\r\n\t\t\t\tconsole.log(\"当前选择:\",this.select) // 0:全部任务 1：我的任务\r\n\t\t\t},\r\n\t\t\t// 初始化任务列表数据\r\n\t\t\tinitMyTaskList(){\r\n\t\t\t\tthis.isloading = true\r\n\t\t\t\tlet that = this\r\n\t\t\t\tlet _data = {\r\n\t\t\t\t\tdriverId: uni.getStorageSync(\"userInfo\").driverId\r\n\t\t\t\t}\r\n\t\t\t\t// 查询我的任务\r\n\t\t\t\tthat.$api.queryMyTask(_data).then((res) => {\r\n\t\t\t\t\tthat.mytaskList = res.datas.task\r\n\t\t\t\t\tconsole.log(\"我的任务列表\",that.mytaskList)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tinitTaskList(){\r\n\t\t\t\tconsole.log(\"开始查询\")\r\n\t\t\t\t// ** 打开节流阀\r\n\t\t\t\tthis.isloading = true\r\n\t\t\t\tlet that = this\r\n\t\t\t\tlet _data = {\r\n\t\t\t\t\tpage:that.currentPage,\r\n\t\t\t\t\tlimit:that.pageSize\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log('查询参数',_data)\r\n\t\t\t\tthat.$api.queryTaskByPage(_data).then((res) => {\r\n\t\t\t\t\tthat.total = res.datas.total\r\n\t\t\t\t\tlet temptaskList = res.datas.task\r\n\t\t\t\t\t// that.taskList = [...that.taskList, ...res.datas.task]\r\n\t\t\t\t\ttemptaskList.forEach((item) => {\r\n\t\t\t\t\t\tthat.taskList.push(item)\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// this.goodsList = [...this.goodsList, ...res.message.goods]\r\n\t\t\t\t\tconsole.log(\"任务列表结果：\",that.taskList)\r\n\t\t\t\t\tconsole.log(\"总长度\",that.total)\r\n\t\t\t\t\tthat.isloading = false\r\n\t\t\t\t})\r\n\t\t\t\tthat.isloading = false\r\n\t\t\t},\r\n\t\t// 查看任务详情\r\n\t\topenDetail(item){\r\n\t\t\tconsole.log('查看任务详情',item)\r\n\t\t\t// open 方法传入参数 等同在 uni-popup 组件上绑定 type属性\r\n\t\t\t// this.$refs.popup.open(\"center\")\r\n\t\t\t//在起始页面跳转到test.vue页面并传递参数\r\n\t\t\t// item='+ encodeURIComponent(JSON.stringify(item))\r\n\t\t\t// '/pages/test/test?item='+ encodeURIComponent(JSON.stringify(item))\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: '/pages/task/taskInfo?item='+encodeURIComponent(JSON.stringify(item))\r\n\t\t\t});\r\n\r\n\t\t},\r\n\t\tselectTask(item){\r\n\t\t\tthis.modalInfo.show = true; //接受任务弹窗\r\n\t\t\tthis.tempTask = item\r\n\t\t\tconsole.log(\"接受任务\",this.tempTask)\r\n\t\t},\r\n\t\tfinishTask(item){\r\n\t\t\tthis.modalInfo2.show = true;   //完成任务弹窗\r\n\t\t\tthis.tempTask = item\r\n\t\t\tconsole.log(\"完成任务\",this.tempTask)\r\n\t\t},\r\n\t\tconfirmSelect(){\r\n\t\t\tconsole.log(\"确认点击接受\")\r\n\t\t\tlet that = this\r\n\t\t\tlet _data = {\r\n\t\t\t\ttaskId: this.tempTask.taskId,\r\n\t\t\t\tdriverId: uni.getStorageSync(\"userInfo\").driverId,\r\n\t\t\t\ttaskStatus:2\r\n\t\t\t}\r\n\t\t\tthat.$api.selectTask(_data).then((res) => {\r\n\t\t\t\tconsole.log(\"接受后任务\",res)\r\n\t\t\t\tif(res.code==-1){ //发送错误\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: res.message,\r\n\t\t\t\t\t\ticon: 'error'\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tlet tmp = res.datas.task\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\tmessage:\"更新中\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthat.modalInfo.show =false  //关闭弹窗\r\n\r\n\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t// 延迟更新\r\n\t\t\t\t\tthat.taskList.forEach((taskItem,index) => {\r\n\t\t\t\t\t\tif(taskItem.taskId== tmp.taskId){\r\n\t\t\t\t\t\t\tconsole.log(\"index = \",index)\r\n\t\t\t\t\t\t\tthat.taskList.splice(index,1,tmp)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// 更新我的任务\r\n\t\t\t\t\tthat.initMyTaskList()\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t},1500)\r\n\t\t\t\t}\r\n\t\t\r\n\t\t\t})\r\n\t\t\tconsole.log(\"接受任务结束\")\r\n\t\t},\r\n\t\tconfirmFinish(){\r\n\t\t\tlet that = this\r\n\t\t\tlet _data = {\r\n\t\t\t\ttaskId: this.tempTask.taskId,\r\n\t\t\t\ttaskStatus:3,\r\n\t\t\t\tfinishTime: that.$utils.getCurrentTime()\r\n\t\t\t}\r\n\t\t\tthat.$api.updateTask(_data).then((res)=>{\r\n\t\t\t\tconsole.log(\"完成任务\",res)\r\n\t\t\t\tif(res.code==-1){\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: res.message,\r\n\t\t\t\t\t\ticon: 'error'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tlet tmp = res.datas.task\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\tmessage:\"更新中\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthat.modalInfo2.show =false  //关闭弹窗\r\n\t\t\t\t\t\r\n\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t// 延迟更新\r\n\t\t\t\t\tthat.mytaskList.forEach((taskItem,index) => {\r\n\t\t\t\t\t\tif(taskItem.taskId== tmp.taskId){\r\n\t\t\t\t\t\t\tconsole.log(\"index = \",index)\r\n\t\t\t\t\t\t\tthat.mytaskList.splice(index,1,tmp)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t})\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t},1500)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\n\t\t}\n\t};\n</script>\n<style lang=\"scss\">\r\n\t.pagecontrol-top-scroll {\r\n\t    height: 40px;\r\n\t    width: 100%;\r\n\t    white-space: nowrap;\r\n\t    box-sizing: border-box;\r\n\t    border-bottom-width: 1rpx;\r\n\t    border-bottom-style: solid;\r\n\t    border-bottom-color: #ededed;\r\n\t}\r\n\t\r\n\t.pagecontrol-top-title {\r\n\t    height: 100%;\r\n\t    width: 100%;\r\n\t    display: flex;\r\n\t    justify-content: space-around;\r\n\t}\r\n\t\r\n\t.pagecontrol-top-text {\r\n\t    height: 100%;\r\n\t    display: flex;\r\n\t    flex-direction: column;\r\n\t    align-items: center;\r\n\t    justify-content: center;\r\n\t    text-align: center;\r\n\t}\r\n\t\r\n\t.pagecontrol-top-normal {\r\n\t    color: black;\r\n\t    font-size: 16px;\r\n\t}\r\n\t\r\n\t.pagecontrol-top-selected {\r\n\t    color: #0abafa;\r\n\t    font-size: 17px;\r\n\t}\r\n\t\r\n\t.pagecontrol-bottom-line {\r\n\t    width: 100%;\r\n\t    height: 1px;\r\n\t    margin-top: 2px;\r\n\t    background-color: #0abafa;\r\n\t}\r\n\t\r\n\t.pagecontrol-bottom-line-show {\r\n\t    visibility: visible;\r\n\t}\r\n\t\r\n\t.pagecontrol-bottom-line-visibility {\r\n\t    visibility: hidden;\r\n\t}\r\n\t.task{\r\n\t\tsub-title{\r\n\t\t\tcolor: red;\r\n\t\t}\r\n\t}\n\t.slot-box {\n\t\t/* #ifndef APP-NVUE */\n\t\tdisplay: flex;\n\t\t/* #endif */\n\t\tflex-direction: row;\n\t\talign-items: center;\n\t}\r\n\t .taskCard{\r\ntext-overflow: ellipsis;\nwhite-space: nowrap;\noverflow: hidden;\r\n\t}\r\n\n\t.slot-image {\n\t\t/* #ifndef APP-NVUE */\n\t\tdisplay: block;\n\t\t/* #endif */\n\t\tmargin-right: 10px;\n\t\twidth: 30px;\n\t\theight: 30px;\n\t}\n\t\n\t.slot-text {\n\t\tflex: 1;\n\t\tfont-size: 14px;\n\t\tcolor: #4cd964;\n\t\tmargin-right: 10px;\n\t}\r\n\t.bottom-buttons {\r\n\t    margin-top: 10rpx;\r\n\t    display: flex;\r\n\t    justify-content: flex-end;\r\n\t    align-items: center;\r\n\t}\r\n\t\r\n\t.button-tag {\r\n\t    margin-left: 40rpx;\r\n\t    height: 30px;\r\n\t    line-height: 30px;\r\n\t    padding: 0 20px;\r\n\t    border-radius: 15px;\r\n\t    color: #a5a5a5;\r\n\t    border: 1px solid #ededed;\r\n\t}\n</style>\n\n","import mod from \"-!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./task.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./task.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1683560467626\n      var cssReload = require(\"D:/HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}